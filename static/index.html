<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ë‚´ ì˜ìˆ˜ì¦ OCR ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        body { background-color: #f8f9fa; padding-top: 5px; }
        .container { max-width: 1100px; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .upload-zone { border: 2px dashed #dee2e6; padding: 20px; text-align: center; border-radius: 10px; cursor: pointer; transition: 0.3s; }
        .upload-zone:hover { border-color: #0d6efd; background-color: #f0f7ff; }
        .preview-img { max-width: 100%; height: auto; border: 1px solid #ddd; }
        #fileList { margin-top: 20px; }
        .status-badge { font-size: 0.8rem; }
    </style>
</head>
<body>

<div class="container mt-4">
	 <!-- ì œëª© ì˜ì—­ -->
    <div class="text-center mb-4">
        <h2 class="fw-bold mb-3">ğŸ§¾ ì˜ìˆ˜ì¦ ì •ë³´ ì¶”ì¶œê¸°</h2>
        <div class="mb-3">
            <span class="text-muted d-block">âœ¨ ìƒˆë¡œê³ ì¹¨ ì‹œì— í™”ë©´ ì´ˆê¸°í™” ë° íŒŒì¼ ìë™ ì‚­ì œ ìˆ˜í–‰</span>
            <a href="í•˜ì´íŒ¨ìŠ¤ ë§í¬" target="_blank" class="btn btn-link btn-sm text-primary text-decoration-none fw-bold">
                <i class="bi bi-arrow-left"></i> í•˜ì´íŒ¨ìŠ¤ ì˜ìˆ˜ì¦ ì¶”ì¶œê¸°ë¡œ ê°€ê¸° ğŸ”—
            </a>
        </div>
    </div>

	<!-- ê°œì¸ í‚¤ ë° í˜¸ì¶œ íšŸìˆ˜ í‘œì‹œ í™”ë©´ -->
    <div class="card border-0 shadow-sm mb-4 bg-light">
        <div class="card-body py-3">
            <div class="row align-items-center">
                <div class="col-md-7">
                    <div class="input-group">
                        <span class="input-group-text bg-white border-end-0">
                            <i class="bi bi-key"></i> ğŸ”‘ ê°œì¸ í‚¤
                        </span>
                        <input type="password" id="serviceKeyInput" class="form-control border-start-0" 
                               placeholder="ì…ë ¥í•˜ì§€ ì•Šì„ ê²½ìš° default í‚¤ê°€ ì‚¬ìš©ë©ë‹ˆë‹¤.">
                    </div>
                </div>
                <div class="col-md-5 mt-3 mt-md-0">
                    <div class="d-flex justify-content-between align-items-center mb-1">
                        <span class="small fw-bold text-secondary">ğŸ“¡ KEY í˜¸ì¶œ í˜„í™©</span>
                        <span id="usageText" class="badge bg-primary"><strong id="todayTotal">0</strong> / 1,000</span>
                    </div>
                    <div class="progress" style="height: 10px; border-radius: 5px;">
                        <div id="usageBar" class="progress-bar progress-bar-striped progress-bar-animated" 
                             role="progressbar" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- íŒŒì¼ ì—…ë¡œë“œ ë° íŒŒì¼ ë¦¬ìŠ¤íŠ¸ ì˜ì—­  -->
    <div class="upload-zone" id="dropZone">
        <input type="file" id="fileInput" multiple hidden accept="image/jpeg, image/png, image/jpg ,application/pdf">
        <i class="bi bi-cloud-arrow-up-fill display-4 text-primary"></i>
        <h5 class="mt-3 fw-bold">íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì¶”ê°€í•˜ì„¸ìš”</h5>
        <p class="text-muted small">ì¤‘ë³µëœ íŒŒì¼ì€ ìë™ìœ¼ë¡œ ì œì™¸ë©ë‹ˆë‹¤.</p>
    </div>

    <div class="d-flex justify-content-between align-items-center bg-light p-2 border rounded mb-2">
        <span>ì—…ë¡œë“œ ëŒ€ê¸° ì¤‘ì¸ íŒŒì¼: <b id="fileCount">0</b>ê°œ</span>
        <div>
            <button class="btn btn-sm btn-outline-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#fileListCollapse">
                ë¦¬ìŠ¤íŠ¸ ì ‘ê¸°/í´ê¸°
            </button>
            <button id="clearAllBtn" class="btn btn-sm btn-danger">ì „ì²´ ì‚­ì œ</button>
        </div>
    </div>

    <div class="collapse show" id="fileListCollapse">
        <div id="fileList" class="list-group mb-3" style="max-height: 200px; overflow-y: auto;"></div>
    </div>

    <button id="processBtn" class="btn btn-success w-100 mb-5">OCR ì²˜ë¦¬ ì‹œì‘</button>
    
    </div>

    <hr>

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4>ì¶”ì¶œ ê²°ê³¼</h4>
        <div>
            <button id="downloadOriginZip" class="btn btn-primary btn-sm">ë³€í™˜ íŒŒì¼ ì „ì²´ ë‹¤ìš´ë¡œë“œ</button>
            <button id="downloadVisZip" class="btn btn-outline-success btn-sm">OCR ê²°ê³¼ ì „ì²´ ë‹¤ìš´ë¡œë“œ</button>
            <button id="downloadCsv" class="btn btn-dark btn-sm" disabled>CSV ë‹¤ìš´ë¡œë“œ</button>
        </div>
    </div>
    
    <div class="table-responsive">
        <table class="table table-hover align-middle">
            <thead class="table-light">
                <tr>
                    <th>ì›ë³¸íŒŒì¼ëª…<br>(í´ë¦­ ì‹œ ì—´ê¸°)</th>
                    <th>ë³€í™˜íŒŒì¼ëª…<br>(í´ë¦­ ì‹œ ë‹¤ìš´)</th>
                    <th>ê°€ë§¹ì ëª…</th>
                    <th>ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸</th>
                    <th>ê²°ì œì¼ì</th>
                    <th>ê²°ì œê¸ˆì•¡</th>
                    <th>ê³¼ì„¸ìœ í˜•</th>
                    <th>ì‘ì—…</th>
                </tr>
            </thead>
            <tbody id="resultTableBody"></tbody>
        </table>
    </div>
</div>

<div class="modal fade" id="previewModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">OCR ë¶„ì„ ì´ë¯¸ì§€</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <img id="modalImg" src="" class="preview-img" alt="OCR ê²°ê³¼">
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    let uploadedFiles = [];
    let lastResultData = []; // CSV ì €ì¥ì„ ìœ„í•´ ìµœì‹  ë°ì´í„°ë¥¼ ì „ì—­ìœ¼ë¡œ ê´€ë¦¬

    // í˜ì´ì§€ ë¡œë“œ ì‹œ í˜¸ì¶œ íšŸìˆ˜ ê°€ì ¸ì˜¤ê¸°
    async function updateUsage() {
        try {
            const res = await fetch('/api/usage');
            const data = await res.json();
            const total = data.total;

            document.getElementById('todayTotal').innerText = total;
            
            const percent = Math.min((total / 1000) * 100, 100);
            const bar = document.getElementById('usageBar');
            bar.style.width = percent + '%';// ê²Œì´ì§€ ìƒ‰ìƒ ë³€ê²½ (ì•ˆì „: ì´ˆë¡, ì£¼ì˜: ë…¸ë‘, ìœ„í—˜: ë¹¨ê°•)

            if (percent > 90) bar.className = 'progress-bar bg-danger';
            else if (percent > 70) bar.className = 'progress-bar bg-warning';
            else bar.className = 'progress-bar bg-success';

        } catch (e) { console.error("ì‚¬ìš©ëŸ‰ ë¡œë“œ ì‹¤íŒ¨"); }
    }
    updateUsage();

    const fileInput = document.getElementById('fileInput');
    const dropZone = document.getElementById('dropZone');
    const fileList = document.getElementById('fileList');
    const resultTableBody = document.getElementById('resultTableBody');
    const downloadCsv = document.getElementById('downloadCsv');
    
    // ì¤‘ë³µ ì²´í¬ë¥¼ ìœ„í•œ ì…‹(Set) ë˜ëŠ” ë¹„êµ ë¡œì§ ì¶”ê°€
    function handleFiles(files) {
        const fileList = Array.from(files);
        let duplicateCount = 0;

        fileList.forEach(newFile => {
            // ì´ë¦„ê³¼ í¬ê¸°ê°€ ëª¨ë‘ ê°™ì€ íŒŒì¼ì´ ë¦¬ìŠ¤íŠ¸ì— ìˆëŠ”ì§€ í™•ì¸
            const isDuplicate = uploadedFiles.some(existingFile => 
                existingFile.name === newFile.name && existingFile.size === newFile.size
            );

            if (!isDuplicate) {
                uploadedFiles.push(newFile);
            } else {
                duplicateCount++;
            }
        });

        if (duplicateCount > 0) {
            alert(`${duplicateCount}ê°œì˜ ì¤‘ë³µëœ íŒŒì¼ì´ ì œì™¸ë˜ì—ˆìŠµë‹ˆë‹¤.`);
        }

        renderFileList(); // íŒŒì¼ ëª©ë¡ ê°±ì‹ 
    }
    
    // ì—…ë¡œë“œ ì¡´ ì´ë²¤íŠ¸
    fileInput.onchange  = (e) => handleFiles(e.target.files);
    dropZone.onclick    = () => document.getElementById('fileInput').click();
    dropZone.ondragover = (e) => { e.preventDefault(); dropZone.style.borderColor = "#0052cc"; };
    dropZone.ondrop     = (e) => { e.preventDefault(); handleFiles(e.dataTransfer.files); };
    
    // Click Event : ì—…ë¡œë“œëœ íŒŒì¼ ì „ì²´ ì‚­ì œ
    document.getElementById('clearAllBtn').addEventListener('click', () => {
        if (uploadedFiles.length === 0) return alert('ì‚­ì œ í•  íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.');
        uploadedFiles = [];
        renderFileList();
    });

    // íŒŒì¼ ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function renderFileList() {
        fileList.innerHTML = '';
        fileCount.innerText = uploadedFiles.length;
        uploadedFiles.forEach((f, idx) => {
            const item = document.createElement('div');
            item.className = 'list-group-item d-flex justify-content-between py-1';
            item.innerHTML = `<small>${f.name}</small> <span style="cursor:pointer" onclick="removeFile(${idx})">âŒ</span>`;
            fileList.appendChild(item);
        });
    }

    function removeFile(idx) {
        uploadedFiles.splice(idx, 1);
        renderFileList();
    }

    function getUserKey(){
        return document.getElementById('serviceKeyInput').value;
    }
    // ì „ì—­ìœ¼ë¡œ ì„ ì–¸
    let currentN = 0;

    function initButtons(){
        document.getElementById('clearAllBtn').disabled = false;
        document.getElementById('processBtn').disabled = false;
        document.getElementById('downloadCsv').disabled = true;
        document.getElementById('downloadOriginZip').disabled = true;
        document.getElementById('downloadVisZip').disabled = true;
    }

    function disableButtons(){
        document.getElementById('clearAllBtn').disabled = true;
        document.getElementById('processBtn').disabled = true;
        document.getElementById('downloadCsv').disabled = true;
        document.getElementById('downloadOriginZip').disabled = true;
        document.getElementById('downloadVisZip').disabled = true;
    }

    function enableButtons(){
        document.getElementById('clearAllBtn').disabled = false;
        document.getElementById('processBtn').disabled = false;
        document.getElementById('downloadCsv').disabled = false;
        document.getElementById('downloadOriginZip').disabled = false;
        document.getElementById('downloadVisZip').disabled = false;
    }

    // 2. ì„œë²„ ì „ì†¡ ë° OCR ì²˜ë¦¬
    document.getElementById('processBtn').addEventListener('click', async () => {
        const res = await fetch('/api/usage');
        const data = await res.json();
        if (data.total > 1000) return alert('ì¼ ì‚¬ìš© í•œë„ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. (1ì²œ íšŒ ê³¼ì„¸ë¶„ë¥˜ ì¡°íšŒ)');
        if (uploadedFiles.length === 0) return alert('íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”.');
        
        const processBtn = document.getElementById('processBtn');
        const userKey = getUserKey();

        // 1. ì¦‰ì‹œ UI ì´ˆê¸°í™” (ìš”êµ¬ì‚¬í•­ 1ë²ˆ)
        disableButtons()
        document.getElementById('resultTableBody').innerHTML = ''; 
        lastResultData = [];
        // ì™„ë£Œ íŒŒì¼ ê°¯ìˆ˜ ì´ˆê¸°í™”
        let completedCount = 0;
        const totalCount = uploadedFiles.length;

        const formData = new FormData();
        uploadedFiles.forEach(file => formData.append('files', file));

        // êµ­ì„¸ì²­ API í‚¤ ì—…ë°ì´íŠ¸
        formData.append('user_key', userKey);

        /**********************************************************/
        // ì—…ë¡œë“œëœ íŒŒì¼ì— ëŒ€í•´ì„œ OCR ìˆ˜í–‰ ë° ì²˜ë¦¬ ê²°ê³¼ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ìˆ˜í–‰
        try {
            const response = await fetch('/api/upload_files', { method: 'POST', body: formData });
            const reader = response.body.getReader();
            const decoder = new TextDecoder();

            // ëˆ„ë¥´ìë§ˆì í‘œì‹œë˜ëŠ” ë¬¸êµ¬
            processBtn.innerText = `ì²˜ë¦¬ ì¤‘ (${completedCount}/${totalCount}) ...`;
            // ìŠ¤íŠ¸ë¦¼ ì½ê¸° ì‹œì‘
            while (true) {
                const { value, done } = await reader.read();
                if (done) break;

                const chunk = decoder.decode(value, { stream: true });
                const lines = chunk.split("\n").filter(line => line.trim());

                lines.forEach(line => {
                    const result = JSON.parse(line);
                    completedCount++;
                    
                    // ê°±ì‹ ë˜ë©´ ë°”ë€ŒëŠ” ì‹¤ì‹œê°„ ì§„í–‰ë¥  (N/M)
                    processBtn.innerText = `ì²˜ë¦¬ ì¤‘ (${completedCount}/${totalCount}) ...`;

                    updateUsage(); 
                    if (result.status === 'success') {
                        addResultRow(result.data);
                        lastResultData.push(result.data);
                    }
                });
            }
            alert("âœ… ëª¨ë“  ì˜ìˆ˜ì¦ ì²˜ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
        } catch (err) {
            console.error("ì—ëŸ¬ ë°œìƒ:", err);
        } finally {
            updateUsage();
            enableButtons();
            processBtn.innerText = 'OCR ì²˜ë¦¬ ì‹œì‘';
            processBtn.disabled = false;
            document.getElementById('downloadCsv').disabled = false;
        }
    });

    // 1. ê³¼ì„¸ë¶„ë¥˜ë³„ ë°°ì§€ ìŠ¤íƒ€ì¼ ì§€ì • í•¨ìˆ˜ (ì—°í•œ ìƒ‰ìƒ ì ìš©)
    function getTaxBadge(taxType) {
        let bgClass = "";
        switch(taxType) {
            case 'ì¼ë°˜': bgClass = "bg-success-subtle text-success border border-success-subtle"; break; // ì—°í•œ ì´ˆë¡
            case 'ê°„ì´': bgClass = "bg-warning-subtle text-warning-emphasis border border-warning-subtle"; break; // ì—°í•œ ì£¼í™©
            case 'ë©´ì„¸': bgClass = "bg-info-subtle text-info border border-info-subtle"; break; // ì—°í•œ í‘¸ë¥¸
            default: bgClass = "bg-danger-subtle text-danger border border-danger-subtle"; // ì—°í•œ ë¶‰ì€ (ë¶ˆëª…/ë¯¸í™•ì¸)
        }
        return `
                <span class="badge ${bgClass}" style="font-weight: 500;">${taxType}</span>
                `;
    }

    // ì¸í„°ë„· ì—°ê²° ìƒíƒœ í™•ì¸ í•¨ìˆ˜
    function checkOnline() {
        return navigator.onLine;
    }

    // í…Œì´ë¸”ì— ì‹¤ì‹œê°„ìœ¼ë¡œ í–‰ì„ ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜
    async function addResultRow(item) {
        const tbody = document.getElementById('resultTableBody');
        const tr = document.createElement('tr');
        
        // ê³¼ì„¸ìœ í˜•ì´ "ì˜¤ë¥˜"ì¸ ê²½ìš° ì¬ì‹œë„ ë²„íŠ¼ í¬í•¨
        // let taxContent = item.tax_type;
        let taxContent = getTaxBadge(item.tax_type);
        if (item.tax_type === "ì˜¤ë¥˜") {
            taxContent += `
                <button class="btn btn-sm btn-outline-warning" onclick="retryTax('${item.biz_no}', this)">
                    ì¬ì¡°íšŒ
                </button>
            `;
        }
        const res = await fetch('/api/my_ip');
        const data = await res.json();

        tr.innerHTML = `
            <td><a href="#" onclick="showPreview('/ocr_result/${data.ip}/${item.renamed_name}')">${item.original_name}</a></td>
            <td><a href="/ocr_result/${data.ip}/${item.renamed_name}" class="text-decoration-none fw-bold" download>${item.renamed_name}</a></td>
            <td>${item.merchant || '-'}</td>
            <td>${item.biz_no || '-'}</td>
            <td>${item.pay_date || '-'}</td>
            <td>${Number(item.amount).toLocaleString()}ì›</td>
            <td class="tax-type-cell">${taxContent}</td>
            <td>
                <div class="btn-group">
                    <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
                        OCR ê²°ê³¼
                    </button>
                    <ul class="dropdown-menu shadow">
                        <li><a class="dropdown-item" href="#" onclick="showPreview('/ocr_result/vis/${data.ip}/${item.vis_name}')">ë¯¸ë¦¬ë³´ê¸°</a></li>
                        <li><a class="dropdown-item" href="/ocr_result/vis/${data.ip}/${item.vis_name}" download>ë¶„ì„ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</a></li>
                    </ul>
                </div>
            </td>
        `;
        tbody.appendChild(tr);
    }

    // ì¬ì¡°íšŒ í•¨ìˆ˜ (ì¸í„°ë„· ì²´í¬ í¬í•¨)
    async function retryTax(bizNo, btn) {
        if (!checkOnline()) return alert("ì¸í„°ë„· ì—°ê²°ì´ ì›í™œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        
        btn.disabled = true;
        btn.innerText = "ì¡°íšŒì¤‘";

        const formData = new FormData();
        // êµ­ì„¸ì²­ API í‚¤ ì—…ë°ì´íŠ¸
        formData.append('user_key', getUserKey());
        formData.append('biz_no', bizNo)

        try {
            const res = await fetch(`/api/retry_tax`, { method: 'POST', body: formData });
            const data = await res.json();
            if (data.status === 'success') {
                btn.parentElement.innerHTML = getTaxBadge(data.tax_type)
            } else {
                alert("ì¬ì¡°íšŒ ì‹¤íŒ¨: " + data.message);
                btn.disabled = false;
                btn.innerText = "ì¬ì¡°íšŒ";
            }
        } catch (e) { alert("ì„œë²„ í†µì‹  ì˜¤ë¥˜"); }
    }

    // Zip ë‹¤ìš´ë¡œë“œ ì´ë²¤íŠ¸
    document.getElementById('downloadOriginZip').onclick = () => location.href = '/api/download_all/origin';
    document.getElementById('downloadVisZip').onclick = () => location.href = '/api/download_all/vis';

    // 4. ë¯¸ë¦¬ë³´ê¸° ëª¨ë‹¬
    function showPreview(url) {
        document.getElementById('modalImg').src = url;
        new bootstrap.Modal(document.getElementById('previewModal')).show();
    }

    // 5. CSV ë‹¤ìš´ë¡œë“œ (ë°ì´í„° ì •í•©ì„± ê°•í™”)
    document.getElementById('downloadCsv').addEventListener('click', () => {
        console.log("DownloadCSV");
        if (lastResultData.length === 0) return alert('OCR ì¸ì‹í•œ ë‚´ì—­ì´ ì—†ì–´ìš”.');

        // í—¤ë” ìƒì„±
        const headers = ["ì›ë³¸íŒŒì¼ëª…", "ë³€í™˜íŒŒì¼ëª…", "ê°€ë§¹ì ëª…", "ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸", "ê²°ì œì¼ì", "ê²°ì œê¸ˆì•¡", "ê³¼ì„¸ìœ í˜•"];
        
        // ë°ì´í„° í–‰ ë³„ ì…ë ¥
        const rows = lastResultData.map(item => [
            `"${item.original_name}"`,
            `"${item.renamed_name}"`,
            `"${(item.merchant || '').replace(/"/g, '""')}"`, // ë”°ì˜´í‘œ ì¤‘ë³µ ë°©ì§€
            `"${item.biz_no || ''}"`,
            `"${item.pay_date || ''}"`,
            `"${item.amount}"`,
            `"${item.tax_type}"`
        ].join(","));

        const csvContent = "\uFEFF" + headers.join(",") + "\n" + rows.join("\n");
        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
        const link = document.createElement("a");

        var today = new Date()
        var year = today.getFullYear();
        var mon = ('0' + (today.getMonth() + 1)).slice(-2);
        var day  = ('0' + today.getDate()).slice(-2);
        var hour= ('0' + today.getHours()).slice(-2);
        var min = ('0' + today.getMinutes()).slice(-2);
        var sec = ('0' + today.getSeconds()).slice(-2);
        var dateString = year + mon  + day + "_" + hour + min + sec;
        link.href = URL.createObjectURL(blob);
        link.download = `ì˜ìˆ˜ì¦_ì¶”ì¶œê²°ê³¼_${dateString}.csv`;
        link.click();
    });
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
    window.onload = async () => {
        try {
            // í™”ë©´ ì´ˆê¸°í™”
            initButtons()
            // 2. ìš”êµ¬ì‚¬í•­: ì ‘ì† IP í‘œì‹œ
            const res = await fetch('/api/my_ip');
            const data = await res.json();
            const infoBar = document.createElement('div');
            infoBar.className = 'text-end mb-2 text-muted small';
            infoBar.innerHTML = `ì ‘ì† IP: <span class="badge bg-secondary">${data.ip}</span>`;
            document.querySelector('.container').prepend(infoBar);
        } catch (e) { console.log("IP ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."); }
    };

</script>

</body>
</html>